<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="tablesconstructorsortandsearch.css">
	<title>Document</title>
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.14.0/css/all.css" integrity="sha384-HzLeBuhoNPvSl5KYnjx0BT+WB0QEEqLprO+NBkkk5gbc67FTaL7XIGa2w1L0Xbgc" crossorigin="anonymous">
</head>
<body>

	<div id="usersTableSort"></div>
	
	<script src="tablesconstructorsortandsearch.js"></script>
	<script>

		const config1 = {
			parent: 'usersTableSort',
			columns: [
			{title: '№', value: '_index'},
			{title: 'Имя', value: 'name'},
			{title: 'Фамилия', value: 'surname', sortable: true},
			{title: 'Возраст', value: 'age', type: 'number', sortable: true},
			],
			search:
			{
			    fields: ['name', 'surname'],
			    filters: [
			    	"v.toLowerCase()",
			    	"toKeyboardLayout(v, 'ru', 'en')",// второе значение с какого языка, третье на какой 
			    	"toKeyboardLayout(v, 'en', 'ru')" 
			    ]
			}
		};

		const users = [
		{id: 30050, name: 'Вася', surname: 'Петров', age: 12},
		{id: 30051, name: 'Вася', surname: 'Васечкин', age: 15},
		{id: 30051, name: 'Васяd', surname: 'Васечкdин', age: 15},
		];
		DataTablePlusSearch(config1, users);

		function toKeyboardLayout(text, ln, ln2)
		{	
			let ru = ['а', 'б', 'в', 'г', 'д', 'е', 'ё', 'ж', 'з', 'и', 'й', 'к', 'л', 'м', 'н', 'о', 'п', 'р', 'с', 'т', 'у', 'ф', 'х', 'ц', 'ч', 'ш', 'щ', 'ь', 'ы', 'ъ', 'э', 'ю', 'я'];
			let en = ['f', ',', 'd', 'u', 'l', 't', '`', ';', 'p', 'b', 'q', 'r', 'k', 'v', 'y', 'j', 'g', 'h', 'c', 'n', 'e', 'a', '[', 'w', 'x', 'i', 'o', 'x', 's', ']', `'`, '.', 'z'];

			let temp = '';
			let tempArr = text.split('');
			let counter = 0;
			while(counter != tempArr.length)
			{
				temp += translit(tempArr[counter].toLowerCase(), eval(ln), eval(ln2));
				counter++;
			}
			return(temp)
		}

		function translit(letter, ln, ln2)
		{
			let temp = '';
			let counter = 0;
			while(counter != ln.length && !temp)
			{
				if(letter == ln[counter]) temp = ln2[counter];
				counter++;
			}
			if(temp) return temp;
			else return letter;
		}
	</script>
</body>
</html>